#!/usr/bin/env ruby
require File.dirname(__FILE__) + '/../config/boot'
require 'builder_starter'

# do not start builders if "--without-builders" parameters
# is found in the command line arguments
without_builder_param = "--without-builders"
if(!ARGV.index(without_builder_param).nil?)
  BuilderStarter.run_builders_at_startup = false
  ARGV.delete(without_builder_param)
end

# change default port from Rails' usual 3000 to 3333, so that it doesn't clash with other Rails apps 
# running on the same box.
if (ARGV & ['-p', '--port']).empty?
  ARGV << '-p' << '3333'
end

# change default environment to production
if (ARGV & ['-e', '--environment']).empty?
  ARGV << '-e' << 'production'
end

require 'commands/server'